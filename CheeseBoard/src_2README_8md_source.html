<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CheeseBoard: src/README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CheeseBoard
   </div>
   <div id="projectbrief">A library for use with the CheeseBoard Cheddar platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">src/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# CheeseBoard Library</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;This library contains components for use with the *CheeseBoard: Cheddar* and variants, with examples which demonstrate the use of the various devices on the board:</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;* WiFi</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;* OLED screen</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;* RGB LEDs</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;* Rotary encoder / push button</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;* HC12 wireless serial module (optional extra)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;## Setting Up the Arduino IDE</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;* Install Arduino IDE (this process tested with version 1.8.5 on Windows/Linux)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;* Visit https://github.com/esp8266/Arduino</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    * Scroll down and copy the &quot;Boards manager link&quot; for the stable release</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;* In the Arduino IDE, go to: File [menu] -&gt; Preferences [menuitem]</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    * Paste the link into the &quot;Additional Board Manager URLs&quot; box </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    * If there&#39;s already something there, add a new line with the link</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    * Click the OK [button]</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;* Tools [menu] -&gt; Board [menu item] -&gt; Boards Manager [menu item]</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    * Wait for Downloading Platforms Index to download</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    * Search for &quot;esp8266&quot;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    * Install latest version of &quot;esp8266 by Esp8266 Community&quot;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    * Click the OK [button]</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;* Sketch [menu] -&gt; Include Library [menu item] -&gt; Manager Libraries... [menu item]</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;* Search for and install the following libraries:</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    * Adafruit NeoPixel library by Adafruit (install using IDE library manager)</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    * Encoder library by Paul Stoffregen (install using IDE library manager)</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    * Time library by Michael Margolis (install using IDE library manager, search for &quot;Timekeeping&quot;)</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    * U8g2 library by Oliver Kraus (install using IDE library manager)</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;* Visit https://github.com/matthewg42/Mutila click &quot;Clone or download&quot; and choose &quot;Download ZIP&quot;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    * Sketch [menu] -&gt; Include Library [menu item] -&gt; Add .ZIP library... [menu item]</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    * Find the .ZIP file you downloaded and select it, click OK</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;* Visit https://github.com/matthewg42/EspApConfigurator click &quot;Clone or download&quot; and choose &quot;Download ZIP&quot;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    * Sketch [menu] -&gt; Include Library [menu item] -&gt; Add .ZIP library... [menu item]</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    * Find the .ZIP file you downloaded and select it, click OK</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;* Visit https://github.com/matthewg42/CheeseBoard click &quot;Clone or download&quot; and choose &quot;Download ZIP&quot;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    * Sketch [menu] -&gt; Include Library [menu item] -&gt; Add .ZIP library... [menu item]</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    * Find the .ZIP file you downloaded and select it, click OK</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;## Building an Example Sketch</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;First set up the Arduino IDE as described above. Then:</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;* Open the HardwareTest example: File [menu] -&gt; Examples [menu item] -&gt; Examples From Custom Libraries [menu item] -&gt; CheeseBoard [menu item] -&gt; HardwareTest [menu item]</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;* Choose the NodeMCU board: Tools [menu] -&gt; Board ... [menu item] -&gt; NodeMCU 1.0 (ESP-12R Module)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;* Click Verify [toolbar button] to build the example - this might take a while</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;* Connect the USB cable direcly to the NodeMCU module (not to the other USB connector!)</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;* Select the correct serial port with Tools [menu] -&gt; Port [menu item] -&gt; ...</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;* Select high speed with Tools [menu] -&gt; Upload Speed [menu item] -&gt; 921600</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;* Click Upload [toolbar button]. Upload can take a little while compared to a regular Arduino - there is much more data being sent!</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;If you have trouble with the upload, try adjusting the speed and trying again (with some cables the highest speeds don&#39;t work so well).</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;## Library Overview</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;The library defines the following objects and classes:</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;* CbLeds - Global instance of CbNeoPixel class - for controlling the RGB LEDs (inherits from Adafruit_NeoPixel, adjusting Millis() as necessary to avoid time drift)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;* CbOledDisplay - Global instance of CbOledDisplayClass - U2g2 object which adds justified wrapped text </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;* CbRotaryInput - Global instance of CbRotaryInputClass for interactive with the rotary encoder + button inputs</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;* CbHC12 - Global instance of SoftwareSerial-based class for using the HC12 </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;* GfxItem - base class for high-level objects which can be drawn on CbOledDisplay</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;* GfxSSIDListBox - a list box for displaying WiFi network information</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;* GfxNetInfo - an item for the GfxSSIDListBox</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;* GfxScene - experimental collection of GfxItem objects</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;* GfxSignalStrength - little signal strength meter for use in GfxNetInfo</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;* GfxStringListBox - generic listbox for strings (needs completion)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;* GfxTextBox - show text in a box with optional border</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;### Notes About the CheeseBoard Library</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;The CheeseBoard library and examples use the Mutila library for various functions and classes. To avoid confusion, I&#39;ll mention a few here which you may notice in the examples:</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;0. The CheeseBoard library and examples are still under development at time of writing. Some of the code is a bit ugly and/or incomplete.</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;1. The macros DB, DBLN abd DBF act like Serial.print, Serial.println and Serial.printf respectively.  These only produce output if DEBUG is defined, allowing quick enabling / disabling of debugging output on serial when building with the Makefile.  To enable debugging output from the IDE, simply add this line at the top of your sketch:</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;```cpp</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;#define DEBUG 1</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;```</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;2. When sending color data to RGB LEDs, interrupts are disabled. This is because the timing of the signal is critical. However, this causes an unwanted side-effect - the counter which the millis() function returns is not updated while interrupts are disabled. With heavy RGB LED use, this causes the millis() return value to be less than excpected. With very frequent updates to RGB LEDs, this can be quite pronounced. Mutila implements Millis(), which does the same thing as millis(), but allows for a correction to be applied, which is done when the CbNeoPixel class is used (CbLeds is a global instance of CbNeoPixel).</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;3. Mutila classes for hardware devices like buttons are all implemented with a timeslice approach. That is, they require an update() function to be called frequently to maintain their state. The idea behind this is to avoid using interrupts wherever possible in order to prevent conflicts with other libraries.</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;4. In the examples, global instances of classes are defined in files whose names are the same as the global object, e.g. Button.h and Button.cpp should define a global object called Button. If the class of that object is also defined in these files, the class name may be the same as the object name with an underscore or &quot;Class&quot; as a suffix.</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;5. In the CheeseBoard examples, I include function prototypes before any function definitions. This is so I can have setup() and loop() at the top of the main source file, but still build with a Makefile. They are not strictly necessary for the IDE build.</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;6. EspApConfigurator is my own re-implementation of venerable WiFi Manager library. It doesn&#39;t block like WiFi Manager, and has a better (IMO) persistent settings system. At time of writing, EspApConfigurator is not complete - multi-page setup mode and custom themed settings pages are still to be implemented. However, single page configuration mode works just fine, which is what we use in the CheeseBoard examples.</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;More detailed Doxygen-generated API documentation for the library can be found here: </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;* https://matthewg42.github.io/Mutila/</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;* https://matthewg42.github.io/EspApConfigurator/</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;* https://matthewg42.github.io/CheeseBoard/</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;## Selecting Cheeseboard Version</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;Select your hardware by editing the CheeseboardConfig.h file, specifying the ???????Config.h file for your hardware and version.  For example, the prototype CheeseBoard: Cheddar uses the config file CheddarV0Config.h, so we edit the CheeseboardConfig.h to contain:</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;```cpp</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;#pragma once</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;#include &quot;CheddarV0Config.h&quot;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;```</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;At time of writing, this is the default since this is the only board which has been made. This mechanism may change in future releases.</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;## Future</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;* Better method of selecting hardware</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;* Make sure all dependent libs are available in IDE library manager - including CheeseBoard</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;* Light metronome example</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;* HC12 AT mode configuration utility example example</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
