<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EspApConfigurator: ESP Access Point Configurator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EspApConfigurator
   </div>
   <div id="projectbrief">Access point configurastion &amp; persistence for ESP projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ESP Access Point Configurator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Summary</h2>
<p>This is a re-implementation and modification of the functionality available in the <a href="https://github.com/tzapu/WiFiManager">WiFiManager library</a>.</p>
<p>Differences:</p>
<ul>
<li>Less flash memory usage (faster to upload your code)</li>
<li>Everything done with timeslices an Mutila Modes, making it possible to run your own code while also being in AP mode (WiFiManager blocks)</li>
<li>Extensible - add your own configuration options which save to EEPROM</li>
</ul>
<h2>Documentation</h2>
<p>Doxygen-generated documentation can be read here: <a href="http://matthewg42.github.io/EspApConfigurator/">http://matthewg42.github.io/EspApConfigurator/</a></p>
<h2>Status</h2>
<p>Still under heavy development.</p>
<h3>Working</h3>
<ul>
<li>Button press to enter AP mode (support high=on logic)</li>
<li>AP mode runs</li>
<li>DNS re-directs all to device</li>
<li>WiFi network scanning</li>
<li>Web pages get served for setting WiFi Credentials</li>
<li>Set SSID, passphrase and hostname</li>
<li>Connect to network in client mode</li>
<li>Hard-ish reset (zaps SSID from ESP memory)</li>
<li>Experimental settings for Char, UInt8, Long, String, Float</li>
<li>Re-arrange project as usable library (wrap whole thing in a ParentMode to it can be easily used in other projects)</li>
<li>Rescan button (just reloads page)</li>
<li>Configure settings with web interface<ul>
<li>validate on save</li>
<li>save to EEPROM</li>
<li>validate on load and set default otherwise</li>
</ul>
</li>
<li>Add default validation (for string)</li>
<li>No networks found indication</li>
<li>Fetch settings by name with operator[](String)</li>
<li>HTTPS in example code</li>
<li>Reset nukes all user settings</li>
<li>Optionally run web interface in ModeWifiClient</li>
</ul>
<h3>TODO</h3>
<ul>
<li>Add option to not have heartbeat</li>
<li>Add ability to remember multiple ssid/passwords</li>
<li>When connected to WiFi "Save &amp; use WiFi" button should just be a save button<ul>
<li>in MultiplePade mode, should have a "switch to AP mode" button</li>
</ul>
</li>
<li>Implement: Multi-page after saving settings re-direct to main page</li>
<li>Implement: Multi-page after saving wifi re-direct to main page</li>
<li>Multi-page implement switch to wifi button</li>
<li>New feature: Add option to disable heartbeat</li>
<li>Fix: sometimes saving and/connecting results in page load fail - fix it!</li>
<li>Fix: when in ModeWifiClient and scan is completed, Heartbeat mode doesn't reset properly</li>
<li>Hostname should not be a default parameter, as ESP does not store it in a non-volatile way</li>
<li>Enhance settings:<ul>
<li>allow special setting for hostname. If it exists, then use it when switching to ModeWifiClient</li>
<li>"fingerprinting" EEPROM[0] with forced reset if fingerprint if mismatch</li>
</ul>
</li>
<li>Web UI:<ul>
<li>ssid/pass pre-populated if the ESP has connected ok in the past</li>
<li>pass should have a "show" option</li>
<li>Customised theming</li>
</ul>
</li>
<li>Better handling of failed connections:<ul>
<li>If connection fails, retry a few times and then<ul>
<li>Turn off WiFi and wake it up once ever few minutes to retry</li>
<li>monitor button for APmode</li>
</ul>
</li>
</ul>
</li>
<li>Low power mode:<ul>
<li>option go into light sleep between periodic activity?</li>
</ul>
</li>
<li>Static IP config</li>
<li>Asynchronous HTTP/HTTPS requests (check out <a href="https://github.com/me-no-dev/ESPAsyncTCP">https://github.com/me-no-dev/ESPAsyncTCP</a>)</li>
<li>NTP / time stuff</li>
</ul>
<h2>Interface Modes</h2>
<h3>Mode 1: Single page interface</h3>
<p>Typically for projects where web server only runs in ModeAP. No password protection for changing settings, but ModeAP should have password set.</p>
<ul>
<li>Single viewable page<ul>
<li>WiFi networks list</li>
<li>Re-scan button</li>
<li>Network settings (ssid, passphrase)</li>
<li>Custom settings</li>
<li>Save settings button</li>
<li>Discard settings button</li>
</ul>
</li>
<li>Routes:<ul>
<li>onNotFound(handleNotFound);</li>
<li>on("/", handleSinglePage);</li>
<li>on("/save", handleSingleSave);</li>
<li>on("/wifi", handleSingleCancel);</li>
<li>on("/r", handleRescan);</li>
</ul>
</li>
</ul>
<h3>Mode 2: Multi page interface</h3>
<p>Typically used for projects where web interface runs in both ModeAP and in ModeWifiClient.</p>
<ul>
<li>Landing page<ul>
<li>Project name as title</li>
<li>Link to WiFi settings page</li>
<li>Link to general settings page</li>
</ul>
</li>
<li>WiFi settings page<ul>
<li>When in ModeWifiClient<ul>
<li>Message saying to press the button to switch into ModeAP to change network connection settings</li>
</ul>
</li>
<li>When in ModeAP<ul>
<li>WiFi networks list</li>
<li>Re-scan button</li>
<li>Network settings (ssid, passphrase)</li>
<li>Save settings button</li>
<li>Discard settings button</li>
</ul>
</li>
</ul>
</li>
<li>General settings page<ul>
<li>Custom settings</li>
<li>Save settings button</li>
<li>Discard settings button</li>
</ul>
</li>
<li>Routes: TODO</li>
</ul>
<h3>Mode 3: Custom interface</h3>
<p>User for more complex projects, or when user wants a more customized look and feel. No routes are registered, but there is the option to register handlers by calling HttpServer.addRoute(...)</p>
<h2>Pre-requisites</h2>
<ul>
<li>Install the Arduino IDE 1.6.6 or later<ul>
<li>All OSes: <a href="https://www.arduino.cc/en/Main/Software">download link</a></li>
<li>Major Linux distros carry it in their software repositories, or the link above may be used</li>
</ul>
</li>
<li>In the Arduino IDE, install ESP8266 board support from Tools -&gt; Board -&gt; Boards Manager</li>
<li>In the Arduino IDE, install ESP8266 tools from Sketch -&gt; Include Library -&gt; Manage Libraries</li>
<li>Install the <a href="https://github.com/matthewg42/Mutila">Mutila</a> library</li>
</ul>
<h2>Building Using the Arduino IDE</h2>
<p>This method is preferred on Windows and for casual users who just want to build and use the project.</p>
<ul>
<li>Open Arduino IDE</li>
<li>Open firmware/firmware.ino</li>
<li>Set the board you are using (under the Tools -&gt; Board menu)</li>
<li>Connect board with USB cable</li>
<li>Click the Upload button on the tool bar</li>
</ul>
<h2>Using make on Linux</h2>
<p>This alternative build system may also be used. It is an alternative to using the Arduino IDE and may be preferred by some users.</p>
<ul>
<li>Install the esp/Arduino makefile: <a href="https://github.com/plerup/makeEspArduino">https://github.com/plerup/makeEspArduino</a></li>
<li>Edit the esp.mk file and set the include line to point at where you installed makeEspArduino.mk (or set the ESP_MAKEFILE environment variable)</li>
<li>Edit firmware/Makefile and uncomment a BOARD for the board you're using (to see a list of possible boards, run "make list_boards" from the firmware directory)</li>
<li>Connect your ESP board with a USB cable</li>
<li>Press and hold the flash button on the board and use the command "make flash" from the firmware directory </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
