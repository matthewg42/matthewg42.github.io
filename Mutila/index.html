<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mutila: Mouse&#39;s Utilities for Arduino: Mouse&#39;s Utilities for Arduino (Mutila)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mutila: Mouse&#39;s Utilities for Arduino
   </div>
   <div id="projectbrief">Oft-used utilities: debouncing buttons, averaging samples, and so on.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Mouse's Utilities for Arduino (Mutila) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Re-usable utility components for Arduino projects. All the stuff we all end up re-implementing every project - buttons, averaging samplers, voltage and current measurements calculations and so on. The classes and functions in this library are intended to be flexible, efficient and stable, as well as following a style which is broadly similar to the core Arduino libraries.</p>
<h2>Author &amp; License</h2>
<p>All code written by Matthew Gates (Mouse), and licensed under the GNU GPL version 3. See the LICENSE file for details.</p>
<h2>Feature Summary</h2>
<h3>Inputs</h3>
<p>A collection of classes and functions for nice handling of basic inputs (buttons and such). The classes are kept as simple as possible while having enough functionality to be useful. ''Time slice-based'' classes should have their ''update()'' method called as frequently as possible, which will return rapidly. These classes are an alternative to interrupt driven IO for projects where interrupts can't be used - e.g. where <em>Mutila</em> inputs must not interfere with timing of other parts of your project which might use interrupts themselves (e.g. motor control).</p>
<ul>
<li><em><a class="el" href="classDigitalInputButton.html">DigitalInputButton</a></em> - switch from a digital input pin.</li>
<li><em><a class="el" href="classAnalogInputButton.html">AnalogInputButton</a></em> - switch from an analog input pin.</li>
<li><em><a class="el" href="classDualInputButton.html">DualInputButton</a></em> - switch from combination of two other buttons.</li>
<li><em><a class="el" href="classDebouncedButton.html">DebouncedButton</a></em> - time slice-based debounced button class with input from a <a class="el" href="classDigitalInputButton.html">DigitalInputButton</a> object.</li>
<li><em><a class="el" href="classDebouncedAnalogButton.html" title="Timeslice-based button with debouncing using analogRead.">DebouncedAnalogButton</a></em> - time slice-based debounced button class with input from an <a class="el" href="classAnalogInputButton.html">AnalogInputButton</a> object.</li>
<li><em><a class="el" href="classDebouncedDualButton.html">DebouncedDualButton</a></em> - time slice-based debounced button class with input from a <a class="el" href="classDualInputButton.html">DualInputButton</a> object.</li>
<li><em><a class="el" href="classDiscretePot.html">DiscretePot</a></em> - use a potential divider attached to an analog input to return a discrete value within a specified range - includes smoothing.</li>
<li><em><a class="el" href="classQuantizedPot.html">QuantizedPot</a></em> - use a potential divider attached to an analog input to return a discrete value based on specific ranges of raw values - includes smoothing.</li>
<li><em><a class="el" href="classMultiThrowSwitch.html">MultiThrowSwitch</a></em> - use for rotary switches with arbitrary number of throws.</li>
<li><em><a class="el" href="classToggleButton.html">ToggleButton</a></em> - each press flips state from on to off.</li>
</ul>
<p>Terms used for Mutila input classes:</p>
<ul>
<li><em>on</em>: instantaneous logical value.</li>
<li><em>pushed</em>: button is on now, and this is the first time pushed has been tested since the button became on.</li>
<li><em>tapped</em>: button has been pushed and released.</li>
<li><em>held</em>: is on and has been for more than some period of time (over and above debouncing).</li>
<li><em>repeat</em>: is held, but will only return true periodically - the delay between true returns is different (typically longer) for the first repeat, and then shorter for subsequent repeats. This follows common repeat characteristics of computer keyboards.</li>
</ul>
<h3>Samplers</h3>
<p>Samplers read from analog input pins and allow some operations to be performed on the data - typically calculating some sort of average value for the pin to help de-noise signals from sensors.</p>
<ul>
<li><em><a class="el" href="classBufferedSampler.html" title="Ringbuffer-based sampler for analog values.">BufferedSampler</a></em> - keeps a buffer of recent samples, providing ability to get average, minimum and maximum for values in the buffer.</li>
<li><em><a class="el" href="classEMASampler.html" title="Exponential Moving Average (EMA) analog pin sampler.">EMASampler</a></em> - provides calculation of exponential moving average value for an analog input.</li>
</ul>
<p>Sampling voltage and current values may be performed using the following classes, which are good examples of how to derive custom samplers from <a class="el" href="classBufferedSampler.html" title="Ringbuffer-based sampler for analog values.">BufferedSampler</a> and <a class="el" href="classEMASampler.html" title="Exponential Moving Average (EMA) analog pin sampler.">EMASampler</a>:</p>
<ul>
<li><em><a class="el" href="classBufferedVDivSampler.html" title="Buffered voltage divider based voltage sampler.">BufferedVDivSampler</a></em> - measure voltage over a voltage divider using <a class="el" href="classBufferedSampler.html" title="Ringbuffer-based sampler for analog values.">BufferedSampler</a>.</li>
<li><em><a class="el" href="classEMAVDivSampler.html" title="Exponential Moving Average Voltage Divider based voltage sampler.">EMAVDivSampler</a></em> - measure voltage over a voltage divider using <a class="el" href="classEMASampler.html" title="Exponential Moving Average (EMA) analog pin sampler.">EMASampler</a>.</li>
<li><em><a class="el" href="classEMACurrentSampler.html" title="Exponential Moving Average current sampler.">EMACurrentSampler</a></em> - measure current using an Allegro ACS756SCB-050B-PFF-T Bi-directional 50A hall effect sensor and <a class="el" href="classEMASampler.html" title="Exponential Moving Average (EMA) analog pin sampler.">EMASampler</a>.</li>
</ul>
<h3>DFPlayer Mini MP3 audio module</h3>
<p>DFPlayer Mini is a neat and affordable audio module which can play MP3 files from an SD card with a serial interface for control. It can also drive a small speaker. Mutila provides the class <em><a class="el" href="classDFPlayerMini.html">DFPlayerMini</a></em> for controlling such a device. <em><a class="el" href="classDFPReader.html">DFPReader</a></em> is a class which can be used to read out numbers and durations, using the samples in the <em>audio/</em> directory.</p>
<h3>HC-SR04 Ultrasonic Ranger</h3>
<p>HC-SR04 ultrasonic range finding modules are inexpensive and popular modules used in Arduino projects. While using them is simple (it only takes a few lines of code to fetch and calculate the range), Mutila provides the following classes for clean usage of these modules, and enhanced functionality:</p>
<ul>
<li><em><a class="el" href="classSonicRanger.html">SonicRanger</a></em> - a basic wrapper around the code necessary to calculate the range of an object, done in the same style as other Mutila classes (with pins passes in a constructor and initialized in a begin() member).</li>
<li><em><a class="el" href="classEMASonicRanger.html" title="SonicRanger with EMA-smoothed values.">EMASonicRanger</a></em> - periodic sampling of the range value, smoothed using the exponential moving average method.</li>
</ul>
<h3><a class="el" href="classHeartbeat.html">Heartbeat</a></h3>
<p>Mutila's <em><a class="el" href="classHeartbeat.html">Heartbeat</a></em> class can be used to blink and LED with variable patterns to give some diagnostic information about the state of the program without needed a more sophisticated display.</p>
<h3><a class="el" href="classMode.html">Mode</a> System</h3>
<p>A <em><a class="el" href="classMode.html">Mode</a></em> is a kind of sub-program which has distinct startup, shutdown and update routines. For example, your program might have a special setup mode which suspends normal operations while settings are altered. The <em><a class="el" href="classModeManager.html">ModeManager</a></em> class can be used to switch between such mutually exclusive modes while keeping your main loop clean and simple.</p>
<p>Modes may be arranged in a hierarchical manner using the <em><a class="el" href="classParentMode.html">ParentMode</a></em> class. This can be useful when building hierarchical menu systems which a couple of buttons.</p>
<h3>EEPROM-backed Settings</h3>
<p><em><a class="el" href="classPersistentSetting.html" title="EEPROM-backed variables with optional wear levelling functionality.">PersistentSetting</a></em> provides an EEPROM-backed store for settings which you want to survive Arduino resets. Supports a simple wear-levelling scheme.</p>
<h2>API Documentation</h2>
<p>Doxygen-generated documentation can be found here: <a href="https://matthewg42.github.io/Mutila/">https://matthewg42.github.io/Mutila/</a></p>
<h3>Generating documentation</h3>
<ol type="1">
<li>Install Doxygen</li>
<li>Run ''doxygen'' from the root of this project - html is generated in doc/html</li>
</ol>
<h2>Ideas for future development</h2>
<h3>Auto version message</h3>
<p>It would be really nice to have some mechanism to write the current project version, and library versions into flash automatically. By version I guess I mean git short hash of library version from library.properties.</p>
<h3>StickyButton</h3>
<ul>
<li>When pushed, stays on for some period of time and then switches off.</li>
<li>Pushing when on restarts the on timer.</li>
</ul>
<h3>n-state button</h3>
<ul>
<li>state=0 --&gt; state=1 ... --&gt; state=n-1 --&gt; state=0.</li>
<li>This makes <a class="el" href="classToggleButton.html">ToggleButton</a> just an n-state where n=2.</li>
</ul>
<h3><a class="el" href="classDFPlayerMini.html">DFPlayerMini</a></h3>
<ul>
<li>doc ops which create reply</li>
<li>asynchronous commands (i.e. do not wait for serial, use update() to send bytes one at a time)</li>
</ul>
<h2>Development Workflow</h2>
<p>At time of writing, Mutila is a one-Mouse project. versions up until v1.1.0 were not made into releases, and most work was done directly in master. However, enough projects now use Mutila that is makes sense to start being a bit more structured, so here's how it's going to work from now (until I need to change it again).</p>
<ul>
<li>After v1.1.1, the <em>master</em> branch is just for releases, which (I hope) will be well-tested and stable.</li>
<li>Each release will be summarised in the ReleaseNotes.md file.</li>
<li>Minor new features, bug fixes and the like will go in the <em>dev</em> branch, which will periodically be merged with master to create a new release.</li>
<li>Major new features will be created in feature branches. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
